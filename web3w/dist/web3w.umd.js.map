{"version":3,"file":"web3w.umd.js","sources":["../src/utils/log.js","../src/utils/store.js","../src/utils/builtin.js","../src/utils/index.js","../src/utils/ethers.js","../src/index.js"],"sourcesContent":["export function makeLog(log) {\n  if (!log) {\n    return voidLog;\n  }\n\n  if (log === console) {\n    return {\n      trace: log.trace,\n      debug: log.trace,\n      info: log.info,\n      warn: log.warn,\n      error: log.error,\n      fatal: log.fatal,\n      silent: log.log,\n    }  \n  }\n  let defaultLog = log.fatal || log.error || log.warn || log.info || log.debug || log.silent || log.log;\n  if (!defaultLog) {\n    defaultLog = console.log.bind(console);\n  } else {\n    defaultLog = defaultLog.bind(log);\n  }\n  return {\n    trace: log.trace ? log.trace.bind(log) : defaultLog,\n    debug: log.debug ? log.debug.bind(log) : defaultLog,\n    info: log.info ? log.info.bind(log) : defaultLog,\n    warn: log.warn ? log.warn.bind(log) : defaultLog,\n    error: log.error ? log.error.bind(log) : defaultLog,\n    fatal: log.fatal ? log.fatal.bind(log) : defaultLog,\n    silent: log.silent ? log.silent.bind(log) : defaultLog,\n  }\n  \n}\n\nexport const voidLog = {\n  trace:() => {},\n  debug:() => {},\n  info:() => {},\n  warn:() => {},\n  error:() => {},\n  fatal:() => {},\n  silent:() => {},\n};\n","function noop() {}\nfunction safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\n// global queue\nconst subscriber_queue = [];\nexport function writable(value, start) {\n    if (!start) { start = noop; }\n\tlet stop;\n\tconst subscribers = [];\n\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) { // store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (let i = 0; i < subscribers.length; i += 1) {\n\t\t\t\t\tconst s = subscribers[i];\n\t\t\t\t\ts[1]();\n\t\t\t\t\tsubscriber_queue.push(s, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction update(fn){\n\t\tset(fn(value));\n\t}\n\n\tfunction subscribe(run, invalidate) {\n        if (!invalidate) { invalidate = noop; }\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.push(subscriber);\n\t\tif (subscribers.length === 1) {\n\t\t\tstop = start(set) || noop;\n\t\t}\n\t\trun(value);\n\n\t\treturn () => {\n\t\t\tconst index = subscribers.indexOf(subscriber);\n\t\t\tif (index !== -1) {\n\t\t\t\tsubscribers.splice(index, 1);\n\t\t\t}\n\t\t\tif (subscribers.length === 0) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn { set, update, subscribe };\n}\n\nexport class Store {\n\n  constructor(value, start) {\n    this.value = value;\n    this._start = start || noop;\n\t  this._stop = undefined;\n\t  this._subscribers = [];\n  }\n\n  set(new_value) {\n\t\tif (safe_not_equal(this.value, new_value)) {\n\t\t\tthis.value = new_value;\n\t\t\tif (this._stop) { // store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (let i = 0; i < this._subscribers.length; i += 1) {\n\t\t\t\t\tconst s = this._subscribers[i];\n\t\t\t\t\ts[1]();\n\t\t\t\t\tsubscriber_queue.push(s, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n  }\n  \n  update(fn){\n\t\tthis.set(fn(value));\n\t}\n  subscribe(run, invalidate) {\n    if (!invalidate) { invalidate = noop; }\n    const subscriber = [run, invalidate];\n    this._subscribers.push(subscriber);\n    if (this._subscribers.length === 1) {\n      this._stop = this.start(set) || noop;\n    }\n    run(value);\n\n    return () => {\n      const index = this._subscribers.indexOf(subscriber);\n      if (index !== -1) {\n        this._subscribers.splice(index, 1);\n      }\n      if (this._subscribers.length === 0) {\n        this._stop();\n        this._stop = null;\n      }\n    };\n  }\n}\n","export function getEthereum() {\n  if (typeof window !== 'undefined') {\n      if (window.ethereum) {\n          return window.ethereum;\n      } else if (window.web3) {\n          return window.web3.currentProvider;\n      }\n  }\n  return null;\n}\n\nexport function fetchEthereum() {\n  // TODO test with document.readyState !== 'complete' || document.readyState === 'interactive'\n  return new Promise((resolve, reject) => {\n      if(document.readyState !== 'complete') {\n          document.onreadystatechange = function() {\n              if (document.readyState === 'complete') {\n                  document.onreadystatechange = null;\n                  resolve(getEthereum());    \n              }\n          };\n      } else {\n          resolve(getEthereum());\n      }\n  });\n}\n\nexport function getVendor(ethereum) {\n  if (!ethereum) {\n      return undefined;\n  } else if(ethereum.isMetaMask) {\n      return 'Metamask';\n  } else if(navigator.userAgent.indexOf(\"Opera\") != -1 || navigator.userAgent.indexOf(\"OPR/\") != -1) {\n      return 'Opera';\n  } else {\n      return 'unknown';\n  }\n  // TODO\n}\n","export function timeout(time, p, config) {\n  return new Promise((resolve, reject) => {\n    let _timedOut = false;\n    const timer = setTimeout(() => {\n      _timedOut = true;\n      if (!config) {\n        reject(new Error(\"TimedOut\"));\n      } else {\n        if (typeof config === \"function\") {\n          resolve(config());\n        } else {\n          reject(config.error || config)\n        }\n      }\n    }, time);\n    p.then((v) => {\n      if (!_timedOut) {\n        clearTimeout(timer);\n        resolve(v);\n      } // TODO else console.log\n    }).catch((e) =>{\n      if (!_timedOut) {\n        clearTimeout(timer);\n        reject(e);\n      } // TODO else console.log\n    });\n  });\n  \n}\n","const noop = (() => {});\n\n// export function virtualContracts(onContractsRequested, observers) {\n//   observers = observers ? {...observers} : {};\n//   observers = {\n//     onContractTxRequested: observers.onContractTxRequested || noop,\n//     onContractTxCancelled: observers.onContractTxCancelled || noop,\n//     onContractTxSent: observers.onContractTxSent || noop,\n//   }\n//   const {onContractTxRequested, onContractTxCancelled, onContractTxSent} = observers;\n  \n//   const fakeContracts = {};\n//   return new Proxy(fakeContracts, {\n//     get: (obj, contractName) => {\n      \n//       if (prop === \"functions\") {\n//         return functionsProxy;\n//       } else if (contractToProxy.functions[prop]) {\n//         return proxyCall(contractToProxy.functions, prop);\n//       } else {\n//         return obj[prop];\n//       }\n//     }\n//   });\n// }\n\nexport function proxyContract(contractToProxy, name, observers) {\n  observers = observers ? {...observers} : {};\n  observers = {\n    onContractTxRequested: observers.onContractTxRequested || noop,\n    onContractTxCancelled: observers.onContractTxCancelled || noop,\n    onContractTxSent: observers.onContractTxSent || noop,\n  }\n  const {onContractTxRequested, onContractTxCancelled, onContractTxSent} = observers;\n  const proxies = {};\n\n  const functionsInterface = contractToProxy.interface.functions;\n  const nameToSig = {};\n  for (const sig of Object.keys(functionsInterface)) {\n    nameToSig[functionsInterface[sig].name] = sig;\n  }\n  \n  const contract = {};\n  for (const key of Object.keys(contractToProxy)) { // TODO populate when contract become available\n    contract[key] = contractToProxy[key];\n  }\n  contract.functions = {};\n  for (const key of Object.keys(contractToProxy.functions)) {\n    contract.functions[key] = contractToProxy.functions[key];\n  }\n\n  // TODO remove:\n  // contract._original = contractToProxy;\n\n  function proxyCall(functions, methodName) {\n    let callProxy = proxies[methodName];\n    if (!callProxy) {\n      let methodInterface = contractToProxy.interface.functions[methodName];\n      if (!methodInterface) {\n        methodInterface = contractToProxy.interface.functions[nameToSig[methodName]]\n      }\n\n      callProxy = new Proxy(functions[methodName], { // TODO empty object (to populate later when contract is available ?)\n        apply: async (method, thisArg, argumentsList) => {\n          const numArguments = argumentsList.length;\n          let overrides;\n          if (numArguments === methodInterface.inputs.length + 1 && typeof(argumentsList[numArguments - 1]) === \"object\") {\n            overrides = argumentsList[numArguments];\n          }\n          let outcome;\n          if (overrides) {\n            outcome = overrides.outcome;\n            delete overrides.outcome;\n          }\n          onContractTxRequested({name, method: methodName, overrides, outcome});\n          let tx;\n          try {\n            tx = await method.bind(functions)(...argumentsList);\n          } catch (e) {\n            onContractTxCancelled({name, method: methodName, overrides, outcome}); // TODO id to identify?\n            throw e;\n          }\n          onContractTxSent({hash: tx.hash, name, method: methodName, overrides, outcome});\n          return tx;\n        }\n      })\n      proxies[methodName] = callProxy;\n    }\n    return callProxy;\n  }\n  const functionsProxy = new Proxy(contract.functions, {\n    get: (functions, methodName) => {\n      return proxyCall(contractToProxy.functions, methodName); // TODO empty\n    }\n  });\n\n  return new Proxy(contract, {\n    get: (obj, prop) => {\n      if (prop === \"functions\") {\n        return functionsProxy;\n      } else if (contractToProxy.functions[prop]) {\n        return proxyCall(contractToProxy.functions, prop);\n      } else {\n        return obj[prop];\n      }\n    }\n  });\n}\n\n\nfunction proxySigner(signer, applyMap, {onTxRequested, onTxCancelled, onTxSent, onSignatureRequested, onSignatureCancelled, onSignatureReceived}) {\n  applyMap = Object.assign({\n    sendTransaction: async (method, thisArg, argumentsList) => {\n      onTxRequested(argumentsList[0]);\n      let tx;\n      try {\n        tx = await method.bind(thisArg)(...argumentsList);\n      } catch (e) {\n        onTxCancelled(argumentsList[0]);\n        throw e;\n      }\n      onTxSent(tx);\n      return tx;\n    },\n    signMessage: async (method, thisArg, argumentsList) => {\n      onSignatureRequested(argumentsList[0]);\n      let signature;\n      try {\n        signature = await method.bind(thisArg)(...argumentsList);\n      } catch (e) {\n        onSignatureCancelled(argumentsList[0]);\n        throw e;\n      }\n      onSignatureReceived(signature);\n      return signature;\n    }\n  }, applyMap);\n  const proxies = {};\n\n  function getProxy(methodName, handler) {\n    let proxy = proxies[methodName]\n    if (!proxy) {\n      proxy = new Proxy(signer[methodName], handler);\n      proxies[methodName] = proxy;\n    }\n    return proxy;\n  }\n\n  return new Proxy(signer, {\n    get: (obj, prop) => {\n      const applyFunc = applyMap[prop];\n      if (applyFunc) {\n        return  getProxy(prop, {\n          apply: applyFunc\n        });\n      } else {\n        return obj[prop];\n      }\n    }\n  });\n}\n\nfunction proxyUncheckedJsonRpcSigner(signer, observers) {\n  return proxySigner(signer, {}, observers);\n}\n\nfunction proxyJsonRpcSigner(signer, observers) {\n  return proxySigner(signer, {\n    connectUnchecked: (method, thisArg, argumentsList) => {\n      const signer = method.bind(thisArg)(...argumentsList);\n      return proxyUncheckedJsonRpcSigner(signer, observers);\n    }\n  }, observers);\n}\n\nexport function proxyWeb3Provider(provider, observers) {\n  observers = observers ? {...observers} : {};\n  observers = {\n    onTxRequested: observers.onTxRequested || noop,\n    onTxCancelled: observers.onTxCancelled || noop,\n    onTxSent: observers.onTxSent || noop,\n    onSignatureRequested: observers.onSignatureRequested || noop,\n    onSignatureCancelled: observers.onSignatureCancelled || noop,\n    onSignatureReceived: observers.onSignatureReceived || noop\n  }\n  const getSignerProxy = new Proxy(provider.getSigner, { // TODO wallet.connect on demand if not Ready // error out if not accepted // special state ?\n    apply: (getSigner, thisArg, argumentsList) => {\n      const signer = getSigner.bind(provider)(...argumentsList);\n      return proxyJsonRpcSigner(signer, observers);\n    }\n  })\n\n  return new Proxy(provider, {\n    get: (obj, prop) => {\n      if (prop === \"getSigner\") {\n        return getSignerProxy;\n      } else {\n        return obj[prop];\n      }\n    }\n  });\n}\n","import { isPrivateWindow } from './utils/web';\nimport {Wallet} from \"@ethersproject/wallet\";\nimport {Web3Provider} from \"@ethersproject/providers\";\nimport {Contract} from \"@ethersproject/contracts\";\nimport {makeLog} from \"./utils/log\";\nimport {writable} from \"./utils/store\";\nimport {fetchEthereum, getVendor} from \"./utils/builtin\"\nimport {timeout} from \"./utils/index.js\"\nimport {proxyContract, proxyWeb3Provider} from \"./utils/ethers\"\nlet logger;\n\nconst $wallet = {\n    builtin: {\n      status: undefined, // Probing | Available | None | Error\n      error: undefined,\n      vendor: undefined\n    },\n    balance: {\n      status: undefined, // Loading | Ready\n      amount: undefined,\n      error: undefined,\n      blockNumber: undefined\n    },\n    contracts: {\n      status: undefined, // Loading | Ready\n      error: undefined\n    },\n    status: undefined, // Loading | Locked | Ready\n    address: undefined,\n    \n    selection: undefined,  // wallet Types available\n    selected: undefined,\n    \n    error: undefined,\n  \n    pendingUserConfirmation: undefined, // [] array of type of request\n};\nconst $transactions = [];\nconst walletStore = writable($wallet);\nconst transactionsStore = writable($transactions);\nfunction addTransaction(obj) {\n  $transactions.push(obj);\n  transactionsStore.set($transactions);\n}\nfunction set(obj) {\n  for (let key of Object.keys(obj)) {\n    if ($wallet[key] && typeof obj[key] === \"object\") {\n      for (let subKey of Object.keys(obj[key])) { // TODO recursve\n        $wallet[key][subKey] = obj[key][subKey];\n      }\n    } else {\n      $wallet[key] = obj[key];\n    }\n  }\n  logger.debug('WALLET', JSON.stringify($wallet, null, '  '));\n  walletStore.set($wallet);\n}\n\nfunction reset(fields) {\n  if (typeof fields === \"string\") {\n    fields = [fields];\n  }\n  for(const field of fields) {\n    const current = $wallet[field];\n    if (typeof current === \"object\") {\n      $wallet[field] = {status:undefined};\n    } else {\n      $wallet[field] = undefined;\n    }\n  }\n}\n// //////////////////////////////////////////////////////////////////////////////\n\nlet _ethersProvider;\nlet _builtinProvider;\nlet _chainConfigs;\n\nfunction isHex(value) {\n  return typeof value === 'string' && value.length > 2 && value.slice(0,2).toLowerCase() === \"0x\";\n}\n\nfunction toDecimal(value) {\n  if (isHex(value)) {\n    return \"\" + parseInt(value.slice(2));\n  }\n  return value;\n}\n\nfunction toHex(value) {\n  if (isHex(value)) {\n    return value;\n  }\n  return \"0x\" + parseInt(value).toString(16);\n}\n\nfunction requestUserAttention(type) {\n  if ($wallet.pendingUserConfirmation) {\n    $wallet.pendingUserConfirmation.push(type);\n  } else {\n    $wallet.pendingUserConfirmation = [type];\n  }\n  set({pendingUserConfirmation: $wallet.pendingUserConfirmation});\n}\nfunction cancelUserAttention(type) {\n  if ($wallet.pendingUserConfirmation) {\n    const index = $wallet.pendingUserConfirmation.indexOf(type);\n    if (index >= 0) {\n      $wallet.pendingUserConfirmation.splice(index, 1);\n      if ($wallet.pendingUserConfirmation.length === 0) {\n        $wallet.pendingUserConfirmation = undefined;\n      }\n      set({pendingUserConfirmation: $wallet.pendingUserConfirmation});\n    }\n  }\n}\n\nconst _observers = {\n  onTxRequested: (transaction) => {\n    requestUserAttention(\"transaction\");\n  },\n  onTxCancelled: (error) => {\n    cancelUserAttention(\"transaction\");\n  },\n  onTxSent: (tx) => {\n    cancelUserAttention(\"transaction\");\n  },\n  onSignatureRequested: (message) => {\n    requestUserAttention(\"signature\");\n  },\n  onSignatureCancelled: (error) => {\n    cancelUserAttention(\"signature\");\n  },\n  onSignatureReceived: (signature) => {\n    cancelUserAttention(\"signature\");\n  },\n  onContractTxRequested: ({name, method, overrides, outcome}) => {\n    // console.log(\"onContractTxRequest\", {name, method, overrides, outcome});\n  },\n  onContractTxCancelled: (error) => {\n  },\n  onContractTxSent: ({hash, name, method, overrides, outcome}) => {\n    console.log(\"onContractTxSent\", {hash, name, method, overrides, outcome});\n    addTransaction({hash, name, method, overrides, outcome});\n  }\n}\n\nasync function setupChain(address) {\n  set({chain: {status: 'Loading'}});\n\n  let contractsToAdd = {};\n  let contractsInfos = {};\n  const {chainId} = await _ethersProvider.getNetwork();\n  if (_chainConfigs) {\n    const chainConfigs = _chainConfigs;\n    if (typeof chainConfigs === \"function\") {\n      chainConfigs = await chainConfigs(chainId);\n    }\n    if (chainConfigs.chainId) {\n      if (chainId == chainConfigs.chainId || chainId == toDecimal(chainConfigs.chainId)) {\n        contractsInfos = chainConfigs.contracts;\n      } else {\n        const error = new Error(`chainConfig only available for ${chainConfigs.chainId} , not available for ${chainId}`);\n        set({chain: {error, chainId, notSupported: true}});\n        throw error;\n      }\n    } else {\n      const chainConfig = chainConfigs[chainId] || chainConfigs[toHex(chainId)];\n      if (!chainConfig) {\n        const error = new Error(`chainConfig not available for ${chainId}`);\n        set({chain: {error, chainId, notSupported: true}});\n        throw error;\n      } else {\n        contractsInfos = chainConfig.contracts;\n      }\n    }\n    for (const contractName of Object.keys(contractsInfos)) {\n      if (contractName === \"status\") {\n        const error = new Error(`invalid name for contract : \"status\"`)\n        set({chain: {error}});\n        throw error;\n      }\n      if (contractName === \"error\") {\n        const error = new Error(`invalid name for contract : \"error\"`)\n        set({chain: {error}});\n        throw error;\n      }\n      const contractInfo = contractsInfos[contractName];\n      contractsToAdd[contractName] = proxyContract(new Contract(contractInfo.address, contractInfo.abi, _ethersProvider.getSigner(address)), contractName, _observers);\n    }\n  }\n  set({\n    chain: {\n      status: 'Ready',\n      chainId\n    },\n    contracts: {\n      ...contractsToAdd,\n      toJSON() {\n        const obj = {};\n        for (const contractName of Object.keys(contractsInfos)) {\n          obj[contractName] = {\n            address: contractsInfos[contractName].address,\n            // abi: contractsInfos[contractName].abi\n          }\n        }\n        return obj;\n      }\n    }\n  }); // TODO None ?\n}\n\nasync function select(type) {\n  if (!type) {\n    if (!$wallet.selection || $wallet.selection.length === 0) {\n      type = \"builtin\";\n    } else if($wallet.selection.length === 1) {\n      type = $wallet.selection[0];\n    } else {\n      const message = `No Wallet Type Specified, choose from ${$wallet.selection}`;\n      // set({error: {message, code: 1}}); // TODO code\n      throw new Error(message);\n    }\n  }\n  if (type == \"builtin\" && $wallet.builtin.status === \"None\") {\n    const message = `No Builtin Wallet`;\n    // set({error: {message, code: 1}}); // TODO code\n    throw new Error(message);\n  } // TODO other type: check if module registered\n  \n  reset([\"address\", \"status\", \"message\", \"selected\", \"lock\"]);\n  set({selected: type, previousType: $wallet.selected, status: \"Loading\", error: undefined});\n  _ethersProvider = null;\n  if (type === 'builtin') {\n    await probeBuiltin();\n    _ethersProvider = _builtinProvider;\n  } else {\n    // TODO load module _ethersProvider = proxyWeb3Provider(new Web3Provider(web3Provider), _observers);\n  }\n\n  if (!_ethersProvider) {\n    const message = `no provider found for wallet type ${type}`\n    set({error: {message, code: 1}}); // TODO code\n    throw new Error(message);\n  }\n\n  let accounts;\n  try {\n    if ($wallet.builtin.vendor === \"Metamask\") {\n      accounts = await timeout(1000, _ethersProvider.listAccounts(), {error: `Metamask timed out. Please reload the page (see <a href=\"https://github.com/MetaMask/metamask-extension/issues/7221\">here</a>)`}); // TODO timeout checks (metamask, portis)\n    } else {\n      // TODO timeout warning\n      accounts = await timeout(20000, _ethersProvider.listAccounts());\n    }\n  } catch (e) {\n    set({error: e});\n    throw e;\n  }\n  const address = accounts && accounts[0];\n  if (address) {\n    set({\n      address,\n      status: 'Ready'\n    });\n    await setupChain(address);\n  } else {\n    set({\n      address: undefined,\n      status: 'Locked',\n    });\n  }\n  \n}\n\nlet probing;\nfunction probeBuiltin(config = {}) {\n  if (probing) {\n    return probing;\n  }\n  probing = new Promise(async (resolve, reject) => {\n    if ($wallet.builtin.status) {\n      return resolve();\n    }\n    set({builtin: {status: \"Probing\"}});\n    try {\n      let ethereum = await fetchEthereum();\n      if (ethereum) {\n        _builtinProvider = proxyWeb3Provider(new Web3Provider(ethereum), _observers);\n        set({builtin: {status: \"Available\", vendor: getVendor(ethereum)}}); \n        // if (config.metamaskReloadFix && $wallet.builtin.vendor === \"Metamask\") {\n        //   // see https://github.com/MetaMask/metamask-extension/issues/7221\n        //   await timeout(1000, _builtinProvider.send(\"eth_chainId\", []), () => {\n        //     // window.location.reload();\n        //     console.log('RELOAD');\n        //   }); \n        // }\n      } else {\n        set({builtin: {status: \"None\", vendor: undefined}});\n      }\n    } catch (e) {\n      set({builtin: {status: \"Error\", message: e.message || e, vendor: undefined}});\n      return reject(e);\n    }\n    resolve();\n  });\n  return probing;\n}\n\n// function autoSelect() {\n//   if (!$wallet.selection || $wallet.selection.length === 0 || ($wallet.selection.length === 1 && $wallet.selection[0] === \"builtin\")) {\n//    // try to get account directly if possible (TODO: need to handle Opera quircks, also Brave)\n//     return select({\n//       provider: builtinProvider,\n//       type: \"builtin\"\n//     });\n//   }\n// }\n\nasync function connect(type) {\n  await select(type);\n  if ($wallet.status === \"Locked\") {\n    return unlock();\n  }\n  return true;\n}\n\nfunction aknowledgeError(field) {\n  if (field === \"builtin\") {\n\n  }\n}\n\nlet unlocking;\nfunction unlock() {\n  if (unlocking) {\n    return unlocking;\n  }\n  let resolved = false;\n  const p = new Promise(async (resolve, reject) => {\n    // TODO Unlocking to retry // TODO add timeout\n    if ($wallet.status === \"Locked\") {\n      requestUserAttention(\"unlock\");\n      let accounts;\n      try {\n        accounts = await _ethersProvider.send(\"eth_requestAccounts\", []);\n      } catch (e) {\n        accounts = [];\n      }\n      if (accounts.length > 0) {\n        const address = accounts[0];\n        cancelUserAttention(\"unlock\")\n        set({\n          address,\n          status: 'Ready'\n        });\n        await setupChain(address);\n      } else {\n        cancelUserAttention(\"unlock\");\n        unlocking = null;\n        resolved = true;\n        return resolve(false);\n      }\n      unlocking = null;\n      resolved = true;\n      return resolve(true);\n    } else {\n      resolved = true;\n      return reject(new Error(`Not Locked`));\n    }\n  });\n  if (!resolved) {\n    unlocking = p;\n  }\n  return p;\n}\n\n// /////////////////////////////////////////////////////////////////////////////////\nexport default (config) => {\n  config = {...(config || {})};\n  config.builtin = config.builtin || {};\n  const {log, debug, chainConfigs, builtin} = config;\n\n  _chainConfigs = chainConfigs;\n  logger = makeLog(log);\n  if (debug && typeof window !== 'undefined') {\n    window.$wallet = $wallet;\n    window.$transactions = $transactions;\n  }\n  \n  if (process.browser && config.builtin.autoProbe) {\n    probeBuiltin(config.builtin);\n  }\n\n  return {\n    transactions: {\n      subscribe: transactionsStore.subscribe\n    },\n    wallet: {\n      subscribe: walletStore.subscribe,\n      probeBuiltin,\n      connect,\n      unlock,\n      get contracts() {\n        return $wallet.contracts; // TODO remove status ?\n      },\n      // logout,\n      get address() {\n        return $wallet.address;\n      },\n      get provider() {\n        return _ethersProvider;\n      },\n      // get fallBackProvider() {\n      //   return _fallBackProvider;\n      // }\n    }\n  };\n};\n"],"names":["noop","Contract","Web3Provider"],"mappings":"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"}